{% extends "base.html" %}
{% load staticfiles %}

{% block js %}
<script src="{% static 'Template/jquery/vendors/bootgrid/jquery.bootgrid.updated.js' %}"></script>
<script>
    jQuery(document).ready(function($) {
        $("#data-table-command").bootgrid({
                    css: {
                        icon: 'zmdi icon',
                        iconColumns: 'zmdi-view-module',
                        iconDown: 'zmdi-expand-more',
                        iconRefresh: 'zmdi-refresh',
                        iconUp: 'zmdi-expand-less'
                        },
                    selection: false,
                    multiSelect: false,
                    rowSelect: false,
                    caseSensitive: false,
                    keepSelection: true,
                    formatters: {
                        "link" : function(column, row) {
                            return "<a href='/academia/estudiante_detalle/" +row.id + "'\>" + "Ver" + "</a>";
                        },
                    }
                });
        $("button[name='Eliminar']").click(function(event) {
            if (!$('tr').hasClass('active')) {
                swal("Nada que Eliminar")
                event.preventDefault();
            } else {
                return true;
            }
        });    
    });
</script>
{% endblock js %}



{% block contenido %}
<div class="container">
	<div class="card">
        <div class="card-header">
            <h1>
                <legend><h3>{{ curso.nombre|capfirst }}</h3></legend>
            </h1>
        </div>
        <form action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="card-body card-padding table-responsive">
                <br>
                <div class="row">
                    <div class="col-md-12">
                        <table id="data-table-command" class="table table-striped table-vmiddle">
                            <thead>
                                <tr>
                                    <th data-identifier="true" data-column-id="module">Modulo</th>
                                    <th data-identifier="true" data-column-id="session">Sesiones</th>
                                    <th data-identifier="true" data-column-id="percent">Porcentaje</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for modulo in modulos %}
                                    <tr>
                                        <td style="text-align: center;">{{ modulo.nombre|capfirst }}</td>
                                        <td>
                                            <ul class="clist clist-check">
                                                {% for sesion in modulo.sesiones %}
                                                    <li>{{ sesion.nombre|capfirst }},  </li>
                                                {% empty %}
                                                    <li>No hay sesiones en el modulo</li>
                                                {% endfor %}
                                            </ul>
                                        </td>
                                        <td style="text-align: center;">{{ modulo.porcentaje }}%</td>                      
                                    </tr>
                                {% empty %}
                                    <tr>
                                        <td colspan="2" style="text-align:center;">A&uacute;n no hay modulos asignados al curso.</td>
                                    </tr>
                                {% endfor %}
                            </tbody> 
                        </table>
                    </div>
                </div>
                <br>
                <br>
            </div>
        </form>
    </div>
</div>
{% endblock %}
