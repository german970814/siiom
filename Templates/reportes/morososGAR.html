{% extends "base.html" %}

{% block js %}
<link href="{{ MEDIA_URL }}Scripts/jquery-ui-1.8.11.custom/css/redmond/jquery-ui-1.8.11.custom.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="{{ MEDIA_URL }}Scripts/jquery-ui-1.8.11.custom/js/jquery-ui-1.8.11.custom.min.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}Scripts/jquery-ui-1.8.11.custom/i18n/jquery.ui.datepicker-es.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
		var dates = $("#id_fechai, #id_fechaf").datepicker({
                                    maxDate: new Date(),
                                    beforeShowDay: function(date){
                                        var day = date.getDay();
                                        var d = this.id == "id_fechai" ? [(day == 1), ""] : [(day == 0), ""];
                                        return d;
                                    },
                                    onSelect: function(selectedDate){
                                        var option = this.id == "id_fechai" ? "minDate" : "maxDate";
                                        dates.not(this).datepicker("option", option, selectedDate);
                                    }
								});
	});
</script>
{% endblock %}

{% block contenido %}

    <h2>Grupos Faltantes por Enviar Reporte de reunion</h2>
    <br />
    
    <form id="form_reunion" action="" method="POST">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div id="id_fechas">
            {{ form.fechai.errors }}
            {{ form.fechaf.errors }}
            <p class="requerido">
                <label>{{ form.fechai.label }}:</label>
                {{ form.fechai }}
                <label>{{ form.fechaf.label }}:</label>
                {{ form.fechaf }}
            </p>
        </div>
        <input type="submit" name="verMorosos" value="Ver Grupos" class="button blue smallB">

    <br /><br />

        <table id="gruposSinReportes" class="simple" cellspacing="0">
            <thead>
                <tr>
                    <th width="22%">Grupo</th>
                    <th width="27%">Lideres</th>
                    <th width="21%">Fecha de reuni&oacute;n</th>
                </tr>
            </thead>
            <tbody>
                {% for grupo in grupos %}
                    <tr>
                        <td>{{ grupo.nombre|capfirst }}</td>
                        <td>
                            <ul>
                            {% for lider in grupo.lideres %}
                                <li>{{ lider.nombre|capfirst }} {{ lider.primerApellido|capfirst }}</li>
                            {% endfor %}
                            </ul>
                        </td>
                        <td>
                            <ul>
                            {% for fecha in grupo.fecha_reunion %}
                                <li>{{ fecha }}</li>
                            {% endfor %}
                            </ul>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td class="centrarTexto" colspan="4">Ning&uacute;n grupo debe reporte de reuni&oacute;n.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    <br />
        <input name="Enviar" type="submit" value="Enviar Mail" class="button blue smallB">
    </form>
{% endblock %}